(this.webpackJsonpdoko_butler=this.webpackJsonpdoko_butler||[]).push([[0],{310:function(e,t,a){e.exports=a(618)},315:function(e,t,a){},316:function(e,t,a){},489:function(e,t,a){e.exports=a.p+"static/media/logo.62486c72.svg"},604:function(e,t){},606:function(e,t){},618:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(60),o=a.n(l),s=(a(315),a(316),a(641));class i extends n.Component{constructor(e){super(e),this.state={hasError:!1}}componentDidCatch(e,t){this.setState({hasError:!0})}render(){return this.state.hasError?r.a.createElement(s.a,{as:"h3",textAlign:"center",content:"Something went wrong - try resetting (top right) + reloading"}):this.props.children}}var c=i,p=a(640),m=a(94),h=a(41),d=a(635);var u=e=>r.a.createElement(d.a,{basic:!0,trigger:e.trigger,centered:!1,closeIcon:!0},r.a.createElement(d.a.Header,null,"Doko Butler"),r.a.createElement(d.a.Content,null,r.a.createElement(d.a.Description,null,r.a.createElement("p",null,"Doko Butler is a little web app that helps you keep track of your Doppelkopf score."),r.a.createElement("ul",null,r.a.createElement("li",null,"To change a player name, simply click on a name and start typing"),r.a.createElement("li",null,"To add a game, use the bottom row to enter the score and select who won that round"),r.a.createElement("li",null,"To add/remove players, click Players and select Add or Remove. Player count is limited between 4 and 7 and may be changed any time."),r.a.createElement("li",null,"To edit a previous game, select the corresponding score and click the edit icon. It will populate the bottom row with the game data"),r.a.createElement("li",null,"To reset everything, click the red RESET on the top right and confirm"),r.a.createElement("li",null,"Games with a score of 0 must have no winners, games with a score >0 must have a least one winner")),r.a.createElement("p",null,"Don't worry if you accidentally reload or close the page - Doko Butler will keep the score.")))),y=a(636),g=a(619);class E extends n.Component{constructor(...e){super(...e),this.state={resetPopupOpen:!1},this.handleClick=()=>{this.setState({resetPopupOpen:!1}),this.props.onReset()},this.handleOpen=()=>{this.setState({resetPopupOpen:!0})},this.handleClose=()=>{this.setState({resetPopupOpen:!1})}}render(){return r.a.createElement(y.a,{name:"resetPopup",hideOnScroll:!0,open:this.state.resetPopupOpen,onClose:this.handleClose,onOpen:this.handleOpen,trigger:this.props.trigger,content:r.a.createElement(g.a,{color:"red",name:"reset",content:"Confirm reset",onClick:this.handleClick}),on:"click",position:"bottom right"})}}var C=E;class w extends n.Component{constructor(...e){super(...e),this.removePlayer=()=>{this.props.onPlayerDelete()},this.addNewPlayer=()=>{this.props.onPlayerAdd()}}render(){return r.a.createElement(y.a,{name:"playerPopup",hideOnScroll:!0,trigger:this.props.trigger,content:r.a.createElement(g.a.Group,{basic:!0,compact:!0},r.a.createElement(g.a,{icon:"remove",color:"red",basic:!0,compact:!0,onClick:this.removePlayer,content:"Remove"}),r.a.createElement(g.a,{icon:"add",color:"green",basic:!0,compact:!0,onClick:this.addNewPlayer,content:"Add"})),on:"click",position:"bottom center"})}}var k=w;class v extends n.Component{constructor(...e){super(...e),this.downloadCSV=()=>{this.props.onDownloadCSV()}}render(){return r.a.createElement(y.a,{name:"csvPopup",hideOnScroll:!0,trigger:this.props.trigger,content:r.a.createElement(g.a.Group,{basic:!0,compact:!0},r.a.createElement(g.a,{icon:"arrow alternate circle down outline",color:"green",basic:!0,compact:!0,onClick:this.downloadCSV,content:"Download"})),on:"click",position:"bottom center"})}}var b=v;class P extends n.Component{constructor(...e){super(...e),this.handleResetClick=()=>{this.props.onReset()}}render(){return r.a.createElement(p.a,{secondary:!0},r.a.createElement(p.a.Item,{content:r.a.createElement("img",{src:a(489),alt:"logo"})}),r.a.createElement(u,{trigger:r.a.createElement(p.a.Item,{name:"help",content:r.a.createElement(s.a,{as:"h3",content:"Doko Butler"})})}),r.a.createElement(k,{onPlayerAdd:this.props.onPlayerAdd,onPlayerDelete:this.props.onPlayerDelete,trigger:r.a.createElement(p.a.Item,{content:"Players"})}),r.a.createElement(b,{onDownloadCSV:this.props.onDownloadCSV,trigger:r.a.createElement(p.a.Item,{position:"left",content:"CSV"})}),r.a.createElement(C,{onReset:this.handleResetClick,trigger:r.a.createElement(p.a.Item,{position:"right",content:r.a.createElement(m.a,{basic:!0,color:"red"},r.a.createElement(h.a,{name:"delete"})," Reset")})}))}}var S=P,f=a(637);class G extends n.Component{constructor(...e){super(...e),this.handleItemClick=e=>{this.props.onChange(e)}}displayPoints(e,t){return t?"".concat(3*e," / ").concat(e):String(e)}render(){const e=this.props,t=e.game,a=e.cumulativeScore,n=e.playerCount,l=t.soloWon||t.soloLost,o=this.displayPoints(t.points,l),s={borderTop:t.gameid%n!==0?null:"solid 2px gray"},i=t.score.map((e,l)=>{const o=null===e?"-":a[l],s=t.winners[l],i=!1===t.winners[l]&&0!==t.points,c=l>=n;return r.a.createElement(f.a.Cell,{content:o,key:l,positive:s,negative:i,hidden:c})});return r.a.createElement(f.a.Row,{style:s},i,r.a.createElement(y.a,{hideOnScroll:!0,trigger:r.a.createElement(f.a.Cell,{content:o}),content:r.a.createElement(h.a,{name:"edit outline",onClick:()=>this.handleItemClick(t.gameid)}),on:"click",position:"top center"}))}}var x=G;class A extends n.Component{emptyGame(e){return{gameid:0,points:Array(e).fill(0),winners:Array(e).fill(!1),soloWon:!1,soloLost:!1}}cumsum2d(e){const t=Array(e.length).fill(Array(e[0].length));return e[0].forEach((e,a)=>{t[0][a]=null===e?0:e}),e.slice(1).forEach((e,a)=>{t[a+1]=e.map((e,n)=>e+t[a][n])}),t}render(){const e=this.props,t=e.games,a=e.playerCount,n=e.cumulativeScore;let l;return t.length>0&&t.length===n.length&&(l=t.map((e,t)=>r.a.createElement(x,{key:t,game:e,playerCount:a,cumulativeScore:n[t],onChange:this.props.onChange}))),r.a.createElement(f.a.Body,null,l)}}var I=A,D=a(634),R=a(631);class O extends n.Component{constructor(...e){super(...e),this.handleChange=e=>{const t=[...this.props.players];t[e.target.id].name=e.target.value,this.props.onChange(t)}}render(){const e={textAlign:"center",fontWeight:"bold"};return r.a.createElement(f.a.Header,null,r.a.createElement(f.a.Row,null,this.props.players.map((t,a)=>r.a.createElement(f.a.HeaderCell,{key:a,hidden:!t.active},r.a.createElement(D.a,null,r.a.createElement(R.a,{transparent:!0,type:"text",placeholder:"Player ".concat(t.playerid+1),id:t.playerid,value:t.name,onChange:this.handleChange},r.a.createElement("input",{style:e}))))),r.a.createElement(f.a.HeaderCell,null,"Game")))}}var T=O,N=a(630);class W extends n.Component{constructor(...e){super(...e),this.handleFocus=e=>{const t=e.currentTarget;setTimeout(()=>{t.select()},0)},this.handleWinnerInput=(e,t)=>{const a=this.props.newGame.checkboxes.slice();a[t.playerid].checked=t.checked,this.props.onChange({checkboxes:a})},this.handlePointInput=(e,t)=>{this.props.onChange({points:t.value})},this.handlePointSubmit=(e,t)=>{const a=this.props.newGame,n=a.points,r=a.checkboxes;let l="0"===n,o=[];r.forEach((e,t)=>{e.checked&&o.push(t)}),l&&0!==o.length?console.warn("Null game must have zero winners."):0!==o.length||l?o.length>3?console.warn("Can't have more than 3 winners."):this.props.onSubmit(this.props.newGame):console.warn("Zero winners must be nullgame.")}}render(){const e=this.props,t=e.newGame,a=e.players,n=t.checkboxes.map((e,t)=>r.a.createElement(f.a.HeaderCell,{key:t,hidden:!a[t].active},a[t].playing?r.a.createElement(N.a,{playerid:t,checked:e.checked,disabled:!a[t].playing,onChange:this.handleWinnerInput}):r.a.createElement(h.a,{name:"x"}))),l=r.a.createElement(f.a.HeaderCell,null,r.a.createElement(R.a,{fluid:!0,size:"mini",type:"number",pattern:"\\d*",max:50,min:0,action:r.a.createElement(g.a,{compact:!0,color:"teal",icon:"add",size:"mini",onClick:this.handlePointSubmit}),onFocus:this.handleFocus,onChange:this.handlePointInput,value:t.points,placeholder:"Points"}));return r.a.createElement(f.a.Footer,{fullWidth:!0},r.a.createElement(f.a.Row,null,n,l))}}var V=W,B=a(642),F=a(632),_=a(633),z=a(638);var H=()=>r.a.createElement(B.a,{style:{padding:"0em 0em 5em 0em"},vertical:!0},r.a.createElement(F.a,{textAlign:"center"},r.a.createElement(_.a,{section:!0}),r.a.createElement(z.a,{horizontal:!0,divided:!0,link:!0,size:"small"},r.a.createElement(z.a.Item,{content:"".concat("doko_butler"," ").concat("0.5.2")}),r.a.createElement(z.a.Item,{as:"a",href:"https://github.com/chohner/doko-butler",target:"_blank"},r.a.createElement(h.a,{name:"github"})," github"),r.a.createElement(z.a.Item,{as:"a",href:"https://chohner.com",target:"_blank",content:"made by chohner"})))),L=a(639),J=a(297);const U=["rgba(22, 70, 112,1)","rgba(145, 80, 150,1)","rgba(245, 89, 110,1)","rgba(255, 166, 0,1)"];class j extends n.Component{render(){const e=this.props,t=e.players,a=e.playerCount,n=e.games;if(n.length>0){const e={labels:Array.from({length:n.length},(e,t)=>t),datasets:[]},l=I.prototype.cumsum2d(n.map(e=>e.score));for(let n=0;n<a;n++)e.datasets.push({label:t[n].name,fill:!1,borderColor:U[n],backgroundColor:U[n],lineTension:.2,data:l.map(e=>e[n])});e.datasets.forEach(e=>{e.data.unshift(0)});const o=[{key:"plot",title:"Progress plot",content:{content:r.a.createElement(J.a,{data:e})}}];return r.a.createElement(L.a,{defaultActiveIndex:-1,panels:o})}return null}}var Z=j,$=a(18),q=a.n($),K=a(299),M=a.n(K);function Q(){return{players:[{playerid:0,name:"Player 1",playing:!0,active:!0},{playerid:1,name:"Player 2",playing:!0,active:!0},{playerid:2,name:"Player 3",playing:!0,active:!0},{playerid:3,name:"Player 4",playing:!0,active:!0},{playerid:4,name:"Player 5",playing:!1,active:!1},{playerid:5,name:"Player 6",playing:!1,active:!1},{playerid:6,name:"Player 7",playing:!1,active:!1}],playerCount:4,games:[],cumulativeScore:[],newGame:{gameid:0,checkboxes:[{playerid:0,checked:!1},{playerid:1,checked:!1},{playerid:2,checked:!1},{playerid:3,checked:!1},{playerid:4,checked:!1},{playerid:5,checked:!1},{playerid:6,checked:!1}],points:""}}}class X extends n.Component{constructor(...e){super(...e),this.state={players:q.a.get("players")||[{playerid:0,name:"Player 1",playing:!0,active:!0},{playerid:1,name:"Player 2",playing:!0,active:!0},{playerid:2,name:"Player 3",playing:!0,active:!0},{playerid:3,name:"Player 4",playing:!0,active:!0},{playerid:4,name:"Player 5",playing:!1,active:!1},{playerid:5,name:"Player 6",playing:!1,active:!1},{playerid:6,name:"Player 7",playing:!1,active:!1}],games:q.a.get("games")||[],cumulativeScore:q.a.get("cumulativeScore")||[],newGame:q.a.get("newGame")||{gameid:0,checkboxes:[{playerid:0,checked:!1},{playerid:1,checked:!1},{playerid:2,checked:!1},{playerid:3,checked:!1},{playerid:4,checked:!1},{playerid:5,checked:!1},{playerid:6,checked:!1}],points:""},playerCount:q.a.get("playerCount")||4},this.emptyState=Q,this.handlePlayerChange=e=>{this.setState({players:e}),q.a.set("players",e)},this.handleGameAdded=e=>{const t=this.state.games,a=this.newGameToGame(e);t[a.gameid]=a;const n=I.prototype.cumsum2d(t.map(e=>e.score));this.setState({cumulativeScore:n}),q.a.set("cumulativeScore",n),this.setState({games:t}),q.a.set("games",t),this.resetNewGame(t.length)},this.handleNewGameChange=e=>{const t=this.state.newGame;void 0!==e.checkboxes&&(t.checkboxes=e.checkboxes),void 0!==e.points&&(t.points=e.points),this.setState({newGame:t}),q.a.set("newGame",t)},this.resetNewGame=e=>{const t=this.state.playerCount,a=this.emptyState().newGame;a.gameid=e,this.setPlaying(t,a.gameid),this.setState({newGame:a}),q.a.set("newGame",a)},this.setPlaying=(e,t)=>{const a=this.state.players,n=Array(e).fill(!0),r=e-4,l=t%e;for(let o=l;o<l+r;o++)n[o%e]=!1;a.forEach((e,t)=>{e.playing=n[t]})},this.handleReset=()=>{const e=this.emptyState();this.setState(e),q.a.set("players",e.players),q.a.set("playerCount",e.playerCount),q.a.set("games",e.games),q.a.set("newGame",e.newGame),q.a.set("cumulativeScore",e.cumulativeScore)},this.handleGameChange=e=>{const t=this.state,a=t.games,n=t.playerCount,r=a[e],l=this.emptyState().newGame;l.checkboxes.forEach((e,t)=>{e.checked=r.winners[t]}),l.points=r.points,l.gameid=r.gameid,this.setPlaying(n,l.gameid),this.setState({newGame:l})},this.addNewPlayer=()=>{let e=this.state,t=e.games,a=e.players,n=e.playerCount;n<7&&(a[n].active=!0,n++,this.setPlaying(n,t.length),this.setState({playerCount:n}),this.setState({players:a}),q.a.set("players",a),q.a.set("playerCount",n),q.a.set("playerCount",n))},this.removePlayer=()=>{let e=this.state,t=e.players,a=e.playerCount,n=e.games;if(a>4){a--;const e=0===n.length?n.length:n[n.length-1].gameid;this.setPlaying(a,e),t[a].active=!1,this.setState({players:t}),this.setState({playerCount:a}),q.a.set("players",t),q.a.set("playerCount",a)}},this.downloadCSV=()=>{let e=this.state,t=e.players,a=e.playerCount,n=e.cumulativeScore,r=e.games;const l=["#"];for(let i=0;i<a;i++)l.push(t[i].name);l.push("game");const o=[l];o.push(new Array(1+a).fill(0)),n.forEach((e,t)=>{const n=r[t];let l=[n.gameid+1];l=l.concat(e.slice(0,a)),l.push(x.prototype.displayPoints(n.points,n.soloWon||n.soloLost)),o.push(l)});const s=new Date;this.downloadStringAsFile(M()(o),"doko_game_".concat(s.toISOString(),".csv"))}}newGameToGame(e){const t=this.state.players,a=Number(e.points),n=e.checkboxes.map((e,a)=>t[a].active&&t[a].playing?e.checked:null),r=n.reduce((e,t)=>e+(!0===t)),l=1===r,o=3===r,s=n.map(e=>null===e?null:e?l?3*a:a:o?-3*a:-a);return{gameid:e.gameid,score:s,points:a,winners:n,soloWon:l,soloLost:o}}downloadStringAsFile(e,t){const a=new Blob([e],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(a),n.download=t,document.body.appendChild(n),n.click()}render(){let e=this.state,t=e.players,a=e.games,n=e.newGame,l=e.playerCount,o=e.cumulativeScore;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{onReset:this.handleReset,onPlayerAdd:this.addNewPlayer,onPlayerDelete:this.removePlayer,onDownloadCSV:this.downloadCSV}),r.a.createElement(c,null,r.a.createElement(f.a,{fixed:!0,selectable:!0,unstackable:!0,columns:5,striped:!0,textAlign:"center",size:"small",style:{borderCollapse:"collapse"}},r.a.createElement(T,{players:t,onChange:this.handlePlayerChange}),r.a.createElement(I,{cumulativeScore:o,games:a,playerCount:l,onChange:this.handleGameChange}),r.a.createElement(V,{players:t,newGame:n,onChange:this.handleNewGameChange,onSubmit:this.handleGameAdded}))),r.a.createElement(Z,{players:t,games:a,playerCount:l}),r.a.createElement(H,null))}}var Y=X;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(617);o.a.render(r.a.createElement(Y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}},[[310,1,2]]]);
//# sourceMappingURL=main.ac454a1c.chunk.js.map